{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d562823f_86141b81",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-11-28T20:23:40Z",
      "side": 1,
      "message": "I don\u0027t see how the current change allows it to log to console as well? I believe the default logbook config pushes logs to the logging file only if the log path is set.",
      "range": {
        "startLine": 7,
        "startChar": 47,
        "endLine": 7,
        "endChar": 61
      },
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a13e5fb6_8ee336e4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-12-12T14:52:59Z",
      "side": 1,
      "message": "As far as I can tell, enabling this flag writes to disk and writes to console. Checking in the GCP logging console, it appears that logs are coming from stdout based on the logName field. Does that look right to you, Ryan? Here\u0027s an example of the log payload taken from the GCP logging console:\n\n{\ninsertId: \"dhpc3umosmjj5zq7\"\nlabels: {4}\nlogName: \"projects/dremio-1093/logs/stdout\"\nreceiveTimestamp: \"2023-11-29T13:24:25.669789756Z\"\nresource: {2}\nseverity: \"INFO\"\ntextPayload: \"2023-11-29 13:24:24,113 [myid:] - INFO [NIOWorkerThread-7:o.a.z.s.NIOServerCnxn@522] - Processing ruok command from /127.0.0.1:50058\"\ntimestamp: \"2023-11-29T13:24:24.113955175Z\"\n}",
      "parentUuid": "d562823f_86141b81",
      "range": {
        "startLine": 7,
        "startChar": 47,
        "endLine": 7,
        "endChar": 61
      },
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "209e42ed_ae250f3e",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-11-28T20:23:40Z",
      "side": 1,
      "message": "Missing log volume mount.",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c0881456_6b301941",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-11-29T13:39:46Z",
      "side": 1,
      "message": "Originally, we only wanted to the logging directory to be on a separate PV on the master node so that we don\u0027t share disk space with the RocksDB. Should we put the logging directory on it\u0027s own PV for all of the pods?",
      "parentUuid": "209e42ed_ae250f3e",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79777e18_331cb40f",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000743
      },
      "writtenOn": "2023-12-07T13:24:38Z",
      "side": 1,
      "message": "The startup script sets this system property. Probably preferable to set the `DREMIO_LOG_DIR` env var instead.\n\nhttps://github.com/dremio/dremio/blob/3034dd82d195c261ebf30941cea9d57424ddf900/oss/distribution/resources/src/main/resources/bin/dremio#L111",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fcf2c3f6_1224af3a",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-12-08T13:41:10Z",
      "side": 1,
      "message": "This `dremio.log.path` is set if `DREMIO_LOG_TO_CONSOLE` !\u003d0. However, we are setting `DREMIO_LOG_TO_CONSOLE` to `1` since we\u0027re running Dremio in a container in this context \n\nhttps://github.com/dremio/dremio/blob/3034dd82d195c261ebf30941cea9d57424ddf900/oss/distribution/resources/src/main/resources/bin/dremio#L42",
      "parentUuid": "79777e18_331cb40f",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b318375_088a6d02",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-12-08T13:44:09Z",
      "side": 1,
      "message": "Sorry -  the comment above should be:\n\nThis dremio.log.path is set if DREMIO_LOG_TO_CONSOLE !\u003d1. However, we are setting DREMIO_LOG_TO_CONSOLE to 1 since we\u0027re running Dremio in a container in this context. So in this case `dremio.log.path` needs to be explicitly set\n\nhttps://github.com/dremio/dremio/blob/3034dd82d195c261ebf30941cea9d57424ddf900/oss/distribution/resources/src/main/resources/bin/dremio#L42",
      "parentUuid": "fcf2c3f6_1224af3a",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92079946_c978fd57",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 68,
      "author": {
        "id": 1000743
      },
      "writtenOn": "2023-12-08T15:28:45Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "5b318375_088a6d02",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f547946b_6618a298",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-11-28T20:23:40Z",
      "side": 1,
      "message": "This would be a breaking change to organizations that directly log from the pod\u0027s stdout to a logging service and must be behind a flag.",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9542d199_0355f909",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-11-29T13:39:46Z",
      "side": 1,
      "message": "As far as I can tell, enabling this flag writes to disk and writes to console. Checking in the GCP logging console, it appears that logs are coming from stdout based on the logName field. Does that look right to you, Ryan? Here\u0027s an example of the log payload taken from the GCP logging console:\n\n{\ninsertId: \"dhpc3umosmjj5zq7\"\nlabels: {4}\nlogName: \"projects/dremio-1093/logs/stdout\"\nreceiveTimestamp: \"2023-11-29T13:24:25.669789756Z\"\nresource: {2}\nseverity: \"INFO\"\ntextPayload: \"2023-11-29 13:24:24,113 [myid:] - INFO  [NIOWorkerThread-7:o.a.z.s.NIOServerCnxn@522] - Processing ruok command from /127.0.0.1:50058\"\ntimestamp: \"2023-11-29T13:24:24.113955175Z\"\n}",
      "parentUuid": "f547946b_6618a298",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b6634b3_282a5f13",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1000743
      },
      "writtenOn": "2023-12-08T15:28:45Z",
      "side": 1,
      "message": "Even if logging to stdout is still active, it will mean that users will suddenly get a new PVC and PV that they didn\u0027t have before that they may not expect",
      "parentUuid": "9542d199_0355f909",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b1fa613_e717fde4",
        "filename": "charts/dremio_v2/templates/dremio-coordinator.yaml",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-12-11T15:58:02Z",
      "side": 1,
      "message": "Is the main issue with a new PVC/PV the additional cost of storage? Are there any other affects that the customer might experience? @dave.maughan - do you have a suggestion on how to better handle this?",
      "parentUuid": "8b6634b3_282a5f13",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d67f22f1_882c9a2b",
        "filename": "charts/dremio_v2/templates/dremio-executor.yaml",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-11-28T20:23:40Z",
      "side": 1,
      "message": "Missing log volume mount.",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ee892f6_81e4a6cc",
        "filename": "charts/dremio_v2/templates/dremio-executor.yaml",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-11-29T13:39:46Z",
      "side": 1,
      "message": "See similar comment in dremio-coordinator.yaml",
      "parentUuid": "d67f22f1_882c9a2b",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39264fe3_20b35058",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 4
      },
      "lineNbr": 51,
      "author": {
        "id": 1000743
      },
      "writtenOn": "2023-12-08T15:28:45Z",
      "side": 1,
      "message": "If we use a separate mount perhaps don\u0027t put the path in the mount path for the other PV to avoid any potential confusion - `/opt/dremio/log`?",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e1d0ca6_0620206a",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 4
      },
      "lineNbr": 51,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-12-11T15:58:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "39264fe3_20b35058",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7bce240_0d4c59bf",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 4
      },
      "lineNbr": 143,
      "author": {
        "id": 1000743
      },
      "writtenOn": "2023-12-08T15:28:45Z",
      "side": 1,
      "message": "nit: keep the formatting consistent with what\u0027s already there. For lists it\u0027s not indenting the `-`\n\nThe style is using:\n```\nlist:\n- a\n- b\n```\n\nnot:\n```\nlist:\n  - a\n  - b\n```",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3591c44c_5ed697bb",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 4
      },
      "lineNbr": 143,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-12-11T15:58:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d7bce240_0d4c59bf",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd6ceffd_9901d055",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 4
      },
      "lineNbr": 256,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-11-28T20:23:40Z",
      "side": 1,
      "message": "Should the storage class of the logging be the same as the coordinator\u0027s storage class?",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef6199e9_b2cdedb1",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 4
      },
      "lineNbr": 256,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-11-29T13:39:46Z",
      "side": 1,
      "message": "The current dremio-master-volume uses re-uses the coordinator\u0027s storage class. Should we use something different for the logging director?",
      "parentUuid": "dd6ceffd_9901d055",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "147588d7_a3d0bb54",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 4
      },
      "lineNbr": 256,
      "author": {
        "id": 1000743
      },
      "writtenOn": "2023-12-08T15:28:45Z",
      "side": 1,
      "message": "From the users perspective, they may want to use different storage classes for data and for logs.",
      "parentUuid": "ef6199e9_b2cdedb1",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16287e21_1dcc49f0",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 4
      },
      "lineNbr": 256,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-12-11T15:58:02Z",
      "side": 1,
      "message": "I\u0027ve separated the storage classes for data and logs",
      "parentUuid": "147588d7_a3d0bb54",
      "revId": "48dec8a3210db137dde10f12380dcadacd29d1b0",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    }
  ]
}