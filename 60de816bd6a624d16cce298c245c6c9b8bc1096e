{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "84dc5212_2aca7c08",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-03-09T16:36:27Z",
      "side": 1,
      "message": "Why set the initial delay seconds to 30?",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f33d5a5_e2583e4e",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-03-09T16:38:28Z",
      "side": 1,
      "message": "I\u0027m seeing Dremio take about 25-30 seconds to spin up. We shouldn\u0027t start polling before then",
      "parentUuid": "84dc5212_2aca7c08",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c24b2a1e_3a764cc6",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-03-09T16:40:43Z",
      "side": 1,
      "message": "Is the startup time dependent on the machine? I would ideally like there to be as little to no delay between Dremio being ready and the readiness probe being invoked.",
      "parentUuid": "0f33d5a5_e2583e4e",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff007e5b_697a12ac",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-03-09T17:01:24Z",
      "side": 1,
      "message": "The startup time is pretty dependent on the machine. My local takes about 40 seconds to start up. \n\nI\u0027ve been testing this change in the dev GCP cluster. The startup time on the n1-standard-4 node type is between 25-30 seconds in my basic testing.",
      "parentUuid": "c24b2a1e_3a764cc6",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2c8ad34_761d39ba",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2023-03-09T18:28:07Z",
      "side": 1,
      "message": "Brian, should we leverage a startupProbe to do this? \n\nstartupProbe:\n  httpGet:\n      path: /\n      port: \u003csomething\u003e\n      failureThreshold: 10\n      periodSeconds: 5\n      \nThis means it will wait 5*10 in worst case, but if the pod is up sooner then we go ahead sooner. We will just have to add a http listener which just accepts conn and closes.\n\nThis will help set the stage for serverless as well.",
      "parentUuid": "ff007e5b_697a12ac",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d461568_e24484c3",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-03-09T19:50:12Z",
      "side": 1,
      "message": "Thanks for the suggestion, Aniket. I\u0027ve updated these templates to have both a startupProbe and readinessProbe\n\nThe startupProbe will ping the `web` port every `periodSeconds` seconds (5) for a max of `periodSeconds` * `failureThreshold` seconds (50). This should cover a worst case scenario. Once this passes, we\u0027ll go directly into the readinessProbe. The readinessProbe will use the default of 0 seconds for initial delay. Once this passes, the pod will be ready.\n\nExample of these probes:\nReadiness:  http-get http://:web/ delay\u003d0s timeout\u003d1s period\u003d5s #success\u003d1 #failure\u003d2\nStartup:    http-get http://:web/ delay\u003d0s timeout\u003d1s period\u003d5s #success\u003d1 #failure\u003d10\n\nWhat do you think about this implementation, Ryan?",
      "parentUuid": "ff007e5b_697a12ac",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1ae9d34d_10f525c9",
        "filename": "charts/dremio_v2/templates/dremio-master.yaml",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-03-11T00:17:29Z",
      "side": 1,
      "message": "Sounds good to me.",
      "parentUuid": "4d461568_e24484c3",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb9437a7_79d3b324",
        "filename": "charts/dremio_v2/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2023-03-09T16:40:43Z",
      "side": 1,
      "message": "Revert the changes in this file?",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e516b7c0_57242af4",
        "filename": "charts/dremio_v2/values.yaml",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000667
      },
      "writtenOn": "2023-03-09T17:25:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bb9437a7_79d3b324",
      "revId": "60de816bd6a624d16cce298c245c6c9b8bc1096e",
      "serverId": "8ca9cf2d-83f4-421d-8552-b009c9e056de"
    }
  ]
}